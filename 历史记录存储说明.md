# 📜 历史记录存储说明

## 📊 当前存储方式

历史记录保存在**浏览器的本地存储（localStorage）**中。

### 存储位置

- **键名**：`correctionHistory`
- **位置**：浏览器的 localStorage
- **格式**：JSON 数组

---

## ⚠️ 当前限制

### 1. 只保存在本地

- ✅ 保存在用户的浏览器中
- ❌ 不同设备/浏览器之间**不会同步**
- ❌ 清除浏览器数据会**丢失历史记录**
- ❌ 换设备或换浏览器看不到之前的记录

### 2. 存储限制

- **最多保存 50 条记录**（代码中已限制）
- 超过 50 条会自动删除最旧的记录
- 受浏览器 localStorage 大小限制（通常 5-10MB）

---

## 🔍 如何查看历史记录

### 在浏览器中查看

1. **打开浏览器开发者工具**（F12 或 Cmd+Option+I）
2. **进入 "Application" 或 "存储" 标签**
3. **找到 "Local Storage"**
4. **点击你的网站域名**
5. **找到 `correctionHistory` 键**
6. **可以看到保存的 JSON 数据**

---

## 💡 如果需要跨设备同步

### 方案1：使用数据库（推荐）

如果需要跨设备同步或永久保存，可以：

1. **添加数据库**（如 MongoDB、PostgreSQL）
2. **用户登录系统**（识别用户）
3. **保存到服务器数据库**
4. **任何设备登录后都能看到历史记录**

### 方案2：使用云存储

- 使用 Firebase、Supabase 等
- 自动同步到云端
- 跨设备访问

---

## 🔧 当前代码实现

### 保存历史记录

```typescript
// 在 app/correction/page.tsx 中
const history = JSON.parse(localStorage.getItem('correctionHistory') || '[]');
history.unshift({
  id: Date.now().toString(),
  originalText: data.originalText,
  correctedText: data.correctedText,
  isCompliant: data.isCompliant,
  timestamp: new Date().toISOString(),
});
// 只保留最近50条记录
localStorage.setItem('correctionHistory', JSON.stringify(history.slice(0, 50)));
```

### 读取历史记录

```typescript
// 在 app/history/page.tsx 中
const stored = localStorage.getItem('correctionHistory');
if (stored) {
  const parsed = JSON.parse(stored);
  setHistory(parsed);
}
```

---

## 📝 历史记录数据结构

每条记录包含：

```typescript
{
  id: string;              // 唯一ID（时间戳）
  originalText: string;    // 原始文本
  correctedText: string;   // 修正后文本
  isCompliant: boolean;    // 是否符合规则
  timestamp: string;       // 时间戳（ISO格式）
}
```

---

## ✅ 当前方案适合

- ✅ 个人使用
- ✅ 不需要跨设备同步
- ✅ 临时记录
- ✅ 简单快速

---

## ❌ 如果需要

- ❌ 跨设备同步
- ❌ 永久保存
- ❌ 多用户共享
- ❌ 大量历史记录

**建议添加数据库和用户系统。**

---

## 🎯 总结

**当前**：历史记录保存在浏览器 localStorage 中
- 只在本设备可见
- 最多 50 条记录
- 清除浏览器数据会丢失

**如果需要跨设备同步**：需要添加数据库和用户系统

---

**当前实现适合个人使用，如果需要跨设备同步，我可以帮你添加数据库！** 💾



